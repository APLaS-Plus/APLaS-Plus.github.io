---
title: YOLOv5ä½¿ç”¨äºŒæœŸ
typora-root-url: YOLOv5ä½¿ç”¨äºŒæœŸ
date: 2024-05-11 18:56:28
category: 
   - Techonology
tags:
   - Yolo
   - Persional Deploy
---

## ç®€è¿°

é‡åˆ°äº†è‡³å°‘8ä¸ª**ERROR**ğŸ˜…ï¼Œå¥½åœ¨è§£å†³çš„éƒ½å¾ˆè¿…é€Ÿï¼Œè¿™æ¬¡ä½¿ç”¨ï¼Œç”¨åˆ°äº†ç»™è§†é¢‘æ‰“æ ‡çš„åŠŸèƒ½ï¼Œä»»åŠ¡ç®—æ˜¯å®Œæˆçš„æ¯”è¾ƒå¥½çš„å§ã€‚



## æµç¨‹

1. è¯•è¿è¡Œtrain.pyï¼Œé‡åˆ°**ERROR1**ï¼Œå…·ä½“è§£å†³è¿‡ç¨‹å‚è€ƒè¯¥[æ–‡æ¡£](https://blog.csdn.net/weixin_52890053/article/details/132111731)ï¼Œå¾ˆå®¹æ˜“è§£å†³ï¼Œä»¥ä¸‹ä¸ºæŠ¥é”™ï¼š

`wandb: ERROR api_key not configured (no-tty). call wandb.login(key=[your_api_key])`

2. é…ç½®ç¯å¢ƒï¼Œé‡åˆ°**ERROR2**ï¼Œå…·ä½“è§£å†³è¿‡ç¨‹ç›´æ¥ç¿»åˆ°**ERROR**éƒ¨åˆ†çœ‹ï¼Œä»¥ä¸‹ä¸ºæŠ¥é”™ï¼š

```
# numpyç‰ˆæœ¬å¤ªæ–°
`np.int` was a deprecated alias for the builtin `int`. To avoid this error in existing code, use `int` by itself.
# æ–°ç‰ˆtorchä¸ä¼šè‡ªåŠ¨è½¬æ¢æµ®ç‚¹å‹ä¸ºæ•´å‹
RuntimeError: result type Float canâ€˜t be cast to the desired output type __int64
```

3. è§‰å¾—è‡ªå·±æ‰“æ ‡å¤ªéº»çƒ¦ï¼Œå‚ç…§äº†è¯¥[è§†é¢‘](https://www.bilibili.com/video/BV13N411q7g1/?p=1&vd_source=99294a2a1c5504f559670de616463ae4),é‡‡ç”¨è¾¹è®­ç»ƒè¾¹æ‰“æ ‡çš„æ¨¡å¼ï¼ŒèŠ‚çº¦æ—¶é—´æˆæœ¬ï¼ˆè¿™å‘¨çœŸçš„å¤ªå¿™äº†ï¼Œè€Œä¸”å› ä¸ºä»»åŠ¡çš„ç‰¹æ®Šæ€§ï¼Œæ˜¯æ ‡æ³¨å¶å­ï¼Œæ‰“æ ‡ä¹Ÿå¾ˆéº»çƒ¦ï¼‰ï¼Œä»¥ä¸‹æ˜¯ä½¿ç”¨çš„å¯¹åº”æ–‡ä»¶åŠå…¶éœ€è¦å¯¼å‡ºçš„å‚æ•°ï¼š

   `python .\detect.py â€“-save-txt`

4. é‡‡ç”¨ä¸Šé¢åŠæ³•ï¼Œåˆé‡åˆ°é—®é¢˜ï¼Œè¿™æ¬¡æ˜¯pillowçš„ç‰ˆæœ¬å¤ªé«˜å¯¼è‡´çš„ï¼Œå½’ç±»ä¸º**ERROR3**ï¼Œ[è§£å†³æ–¹æ¡ˆ](https://zhuanlan.zhihu.com/p/662305030)æŠ¥é”™å¦‚ä¸‹ï¼š

   `DLL load failed while importing _imaging`

5. å†³å®šæ”¾å¼ƒä¹‹å‰æƒ³çœäº‹çš„æƒ³æ³•ï¼ŒåŸå› å¦‚ä¸‹ï¼š

   > æˆ‘ä»¬æ‰“æ ‡çš„å¯¹è±¡æ˜¯å¶å­ï¼Œç”¨ä¸Šè¿°æ–¹æ³•ï¼Œæ‰“äº†ä¹‹åï¼Œéœ€è¦è‡ªå·±ç­›é€‰ï¼Œå…¶å®èŠ±çš„æ—¶é—´å’Œç²¾åŠ›æ›´å¤§ã€‚
   >
   > > ä¸ä»£è¡¨è¿™ç§æ–¹æ³•ä¸èƒ½ç”¨ï¼Œä½œä¸ºä¸€ä¸ªå¾ªç¯æ‰“æ ‡æ³•ï¼Œå¯¹äºæ‰“æ ‡å¯¹è±¡å¦‚æœåœ¨å›¾é‡Œé¢æ¯”è¾ƒåˆ†æ•£ï¼Œè¿™ç§æ–¹æ³•æ˜¯å¾ˆå®ç”¨ï¼Œå¾ˆçœäº‹çš„ã€‚

6. æ—¶é—´ä¸å¤ªå¤šï¼Œæ‰“äº†50ï¼‹çš„å›¾å°±æ‰“ç®—æ‹¿æ¥å…ˆè®­ç»ƒäº†ï¼Œé‡åˆ°**ERROR4**ï¼Œè§£å†³åŠæ³•å°±æ˜¯å§bitch-sizeæ”¹å°ï¼Œé™ä½æœ€å¤§ä½¿ç”¨å†…å­˜ã€‚

   `RuntimeError: DataLoader worker (pid(s) 16272) exited unexpectedly`

7. å¯åŠ¨detect.pyï¼Œå‡ºç°ä¸€ä¸ªæ¨¡å—ä¸è”ç½‘å¯åŠ¨ä¸äº†è¿™ä¸ªåŒ…çš„é—®é¢˜ï¼Œè”ç½‘è§£å†³ã€‚

8. å‘ç°ä»»åŠ¡æé”™äº†ï¼Œé‡æ–°æ‰“æ ‡ï¼Œè®¤æ¸…ä»»åŠ¡ç›®æ ‡ä¹‹åï¼Œå‘ç°ä»»å¯ä»¥æ²¿ç”¨3çš„æ–¹æ³•ï¼Œå€Ÿç”¨LLæ‰“çš„æ ‡ä¹‹åï¼Œç»§ç»­è¿›è¡Œè®­ç»ƒï¼Œå‡ºç°**ERROR5**ï¼Œä»¥ä¸‹æ˜¯å†…å®¹ï¼š

   `WARNING: NMS time limit 10.0s exceeded`

   ![image-20240416045743769](image-20240416045743769.png)

	å…·ä½“åŸç†æ˜¯è¿›è¡ŒNMSçš„æ—¶é—´é˜ˆå€¼å¤ªçŸ­ï¼Œéœ€è¦è°ƒé«˜é˜ˆå€¼ï¼Œå…·ä½“è§£å†³è¿‡ç¨‹çœ‹**ERROR PART**ã€‚

9. åé¢åˆå‡ºç°ä»¥ä¸‹**ERROR6**ï¼Œç½‘ä¸Šçš„è¯´æ³•æ˜¯opencvé‡Œé¢å¤šçº¿ç¨‹å¥—äº†å¤šçº¿ç¨‹ï¼Œæ‰€ä»¥å¯¼è‡´ç¨‹åºå¡æ­»ï¼Œå°è¯•æŠŠä¸Šä¸€æ­¥çš„**time_limit**æ”¹å°ï¼Œæœ‰å¯èƒ½æ˜¯å¼€å¤ªå¤§äº†ï¼Œç°åœ¨ä»1000.0ç§’æ”¹æˆ100.0ç§’ï¼Œæš‚æ—¶èƒ½æ­£å¸¸å·¥ä½œã€‚

   `cv2.error: Caught error in DataLoader worker process 5.`

10. åˆå‡ºç°ä¸¤ä¸ªæ–°**error**ï¼Œå…¶ä¸€æ˜¯æ£€æµ‹å›¾ç‰‡æœ‰å¯èƒ½æŸåï¼Œä¸ºä¸‹å›¾ï¼ŒæŠ¥é”™ä¸º`Corrupt JPEG data: 2 extraneous bytes before marker 0xd9`ï¼Œå…¶äºŒä»æ˜¯9çš„é—®é¢˜ï¼ŒæŸ¥çœ‹ä¸€ç¯‡[æ–‡ç« ](https://blog.csdn.net/weixin_46751388/article/details/126735247)ï¼Œå‘ç°yoloä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è·³è¿‡è¿™äº›æŸåçš„å›¾ç‰‡ï¼Œ**é‚ä¸å¤„ç†**ï¼Œ9çš„é—®é¢˜åˆ™é™åˆ¶æœ€å¤§å¤šçº¿ç¨‹ï¼Œå…·ä½“å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼Œå‰©ä¸‹è§£å†³è¿‡ç¨‹åœ¨**ERROR6**ã€‚

    ![image-20240416125607129](image-20240416125607129.png)

11. è§£å†³äº†ä¸€ç›´éƒ½æœ‰çš„ä¸€ä¸ª**ERROR**ï¼Œç§°å…¶**ERROR7**ï¼Œä¸€ç›´æ²¡å½±å“å°±æ²¡ç®¡ï¼Œè§£å†³æ–¹æ³•æ”¾**ERROR**ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š

    `AttributeError: 'FreeTypeFont' object has no attribute 'getsize'`

12. æ‰§è¡Œ**train.py**ï¼Œç”Ÿæˆçš„è®­ç»ƒæˆæœé™¤äº†**train_loss**ï¼Œ**val_loss**æœ‰ç‚¹è®­ç»ƒä¸å……åˆ†ï¼Œå…¶ä»–çš„æ•°æ®éƒ½æ¯”è¾ƒæ­£å¸¸ï¼š

    ![results](results.png)

13. æ›´æ”¹**detect.py**ä¸­pause_optå‡½æ•°ä¸­çš„`--save-txt`å‚æ•°ï¼Œæ·»åŠ `default = True`æ¥åœ¨è¿è¡Œ**detect.py**æ—¶è‡ªåŠ¨ä¿å­˜æ ‡ç­¾ï¼Œæ¥è¾…åŠ©æ‰“æ ‡ï¼Œåœ¨150å¼ é‡çº§çš„è®­ç»ƒä¹‹åï¼Œå‡†ç¡®ç‡å·²ç»ç›¸å½“é«˜äº†ï¼Œåªæœ‰ä¸€ä¸¤ä¸ªæ˜¯æ²¡æœ‰æ ‡ä¸Šçš„ã€‚



## ä¿®æ”¹åå‚æ•°è¡¨

æ— å…³ç´§è¦çš„å°±ä¸åœ¨è¿™é‡Œé¢äº†ï¼Œéƒ½æ˜¯é»˜è®¤å‚æ•°

* train.py

```python
parser.add_argument('--epochs', type=int, default=400)
```

* scratch.yaml

```yaml
lr0: 0.02  # initial learning rate (SGD=1E-2, Adam=1E-3)
lrf: 0.2  # final OneCycleLR learning rate (lr0 * lrf)
degrees: 0.1  # image rotation (+/- deg)
shear: 0.1  # image shear (+/- deg)
perspective: 0.01  # image perspective (+/- fraction), range 0-0.001
```



## ERROR



1. `wandb: ERROR api_key not configured (no-tty). call wandb.login(key=[your_api_key])`

   > å…¶å®å°±æ˜¯è¿™ä¸ªå«wandbçš„ä¸œè¥¿æ²¡ç™»å½•ä¸Šï¼ŒæŒ‰ç…§æˆ‘ç»™çš„[è§£å†³æ–‡æ¡£](https://blog.csdn.net/weixin_52890053/article/details/132111731)å¾ˆå¿«å°±æå®šäº†

2. numpyç‰ˆæœ¬å¤ªæ–°

	![image-20240411013842130](image-20240411013842130.png)
	
	> è§£å†³æ–¹æ¡ˆï¼Œæ ¹æ®ä½ å®‰è£…çš„YOLOåŒ…çš„**requirement.txt**å»æ¢**numpy**ç‰ˆæœ¬ï¼Œä»¥ä¸‹æä¾›å‡ ä¸ªå¯ç”¨å‘½ä»¤
	>
	> ```
	> pip uninstall packname
	> # pipå¸è½½æŒ‡å®šåŒ…
	> pip install packname==version_number
	> # pipå®‰è£…åˆ¶å®šç‰ˆæœ¬çš„åŒ…
	> ```
	>
	> é€”ä¸­é‡è£…äº†å¾ˆå¤šæ¬¡åŒ…ï¼Œæ‰¾åˆ°æ¯”è¾ƒç¨³å®šçš„ç‰ˆæœ¬ï¼š**1.20.3**ï¼ˆè°¢è°¢ä½ æµªè´¹æˆ‘é‚£ä¹ˆä¹…æ¥è¯•ğŸ˜…ï¼‰

* æ–°ç‰ˆtorchä¸ä¼šè‡ªåŠ¨è½¬æ¢æµ®ç‚¹å‹ä¸ºæ•´å‹

  [è§£å†³æ–¹æ¡ˆ](https://blog.csdn.net/m0_69290797/article/details/134759944)

3. `DLL load failed while importing _imaging`

   > pillowç‰ˆæœ¬è¿‡é«˜å¯¼è‡´çš„ï¼Œå‚è€ƒè¯¥[æ–‡æ¡£](https://zhuanlan.zhihu.com/p/662305030)ï¼Œçœ‹çœ‹å¯¹åº”pythonç‰ˆæœ¬ï¼Œé™ä¸€é™ç‰ˆæœ¬å°±è¡Œäº†

4. bitch-sizeå¼€å¤ªå¤§

   `RuntimeError: DataLoader worker (pid(s) 16272) exited unexpectedly`

   æˆ‘çš„å¡å¤ªåƒåœ¾äº†ï¼Œæ˜¾å­˜é­ä¸ä½ğŸ˜©

   [å‚è€ƒæ–‡æ¡£](https://blog.csdn.net/KaelCui/article/details/106184158)

5. NMSæ—¶é—´é˜ˆå€¼å¤ªä½

   `WARNING: NMS time limit 10.0s exceeded`

   éœ€è¦ä¿®æ”¹ä¸€ä¸ªå«åš**time_limit**ï¼Œå…·ä½“åŸç†åœ¨[è¿™ç¯‡æ–‡ç« ](https://blog.csdn.net/baidu_39629638/article/details/128182056)ï¼Œä½†æ˜¯æˆ‘ç”¨çš„ç‰ˆæœ¬**time_limit**å‚æ•°è®¾ç½®ä¸åœ¨**val.py**é‡Œé¢ï¼Œè€Œæ˜¯åœ¨**general.py**é‡Œé¢ï¼Œå…·ä½“ä½ç½®å¦‚ä¸‹ï¼š

   ![image-20240416050646905](image-20240416050646905.png)

6. OpenCVå¤šçº¿ç¨‹è¶…æ—¶

   `cv2.error: Caught error in DataLoader worker process 5.`

   æ›´æ”¹ä¸€ä¸ªå«åšworkersçš„å‚æ•°ï¼Œè¿™ä¸ªç›´æ¥åœ¨**train.py**çš„**parse_optå‡½æ•°**é‡Œé¢å¯ä»¥æ‰¾åˆ°ï¼Œåœ¨ä¸‹å›¾æœ€åä¸€è¡Œï¼ŒæŠŠé»˜è®¤å€¼ (default) æ”¹æˆæ¯”è¾ƒå°çš„æ•°å€¼å°±è¡Œäº†ï¼Œä¸º0åˆ™ç›´æ¥æ˜¯å…³é—­å¤šçº¿ç¨‹ã€‚

   [çµæ„Ÿæ–‡æ¡£](https://blog.csdn.net/canpian7/article/details/115432429)

   ![image-20240416132745538](image-20240416132745538.png)

7. æ‰¾ä¸åˆ°åä¸ºgetsizeçš„å¯¹è±¡

   `AttributeError: 'FreeTypeFont' object has no attribute 'getsize'`

   åŸç†æ˜¯pillowåœ¨10.0ç‰ˆæœ¬ä¹‹ååˆ é™¤äº†**getsize**çš„åŠŸèƒ½ï¼Œä½ çš„è§£é‡Šå™¨åº”è¯¥æ‰¾ä¸åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œgetsize()çš„ç›®çš„æ˜¯ä¸ºäº†è·å–å­—ä½“**å®½åº¦ (w)** å’Œ**é«˜åº¦ (h)** ï¼Œå¤§éƒ¨åˆ†çš„æ–‡ç« éƒ½ä¼šå«ä½ pillowé™çº§ï¼Œä½†æ˜¯ä¸€ä¸ªé…å¥½çš„ç¯å¢ƒï¼Œæ¢ä¸€ä¸ªç‰ˆæœ¬çš„åº“å¯èƒ½å°±ä¼šè¿è¡Œä¸äº†ï¼Œæ‰€ä»¥å°†æŠ¥é”™çš„æ‰€æœ‰ä½ç½®çš„`getsize()`æ¢æˆä»¥ä¸‹å½¢å¼ä»£ç å³å¯ï¼š

   ```python
   # w,h = font.getsize(text) æ›´æ”¹å‰
   
   box = font.getbbox(text)
   w, h = box[2] - box[0], box[3] - box[1]
   ```

   ç¬”è€…çš„åªåœ¨**plots.py**ä¸­æ‰¾åˆ°ä¸¤å¤„ï¼š

   ![image-20240416145641680](image-20240416145641680.png)



![image-20240416145658140](image-20240416145658140.png)

	[è§£å†³æ–¹æ³•](https://blog.csdn.net/qq_63034152/article/details/131626091)ï¼šè¯¥ç¯‡æ–‡ç« çš„è¯„è®ºåŒºçš„å¤§ç¥æåˆ°çš„æ–¹æ³•





## é…ç½®

* ç³»ç»Ÿç¯å¢ƒï¼šwin11å®¶åº­ç‰ˆ

* è‹±ä¼Ÿè¾¾æ˜¾å¡ï¼šGeForce RTX 3050

* YOLOv5ï¼š6.0

* pytorch:2.2.2

  
