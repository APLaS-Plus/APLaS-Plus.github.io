---
title: YOLOv5ğŸš€ä¸Šæ‰‹è®°å½•
typora-root-url: YOLOv5ğŸš€ä¸Šæ‰‹è®°å½•
date: 2024-05-11 18:54:20
tags:
---

## åè¯ç®€ä»‹

ç¯å¢ƒç®¡ç†ï¼šAnnaconda

æŠ€æœ¯ï¼šCUDAï¼ŒPytorchï¼ŒYOLO

> éƒ½ç†Ÿæ‚‰çš„è¯å¯ä»¥ç›´æ¥ç¿»åˆ°ç¬¬äºŒèŠ‚å®éªŒè¿‡ç¨‹äº†ğŸ«¡

* **YOLO**æ˜¯ä¸€ä¸ªåŸºäº**PytorchæŠ€æœ¯**ï¼Œç”¨äºå›¾åƒè¯†åˆ«çš„æ¨¡å‹ï¼Œéœ€è¦é€šè¿‡å¤§é‡äººå·¥æ ‡è®°è¿‡çš„æ•°æ®é›†æ¥è®­ç»ƒï¼Œä»è€Œè¾¾åˆ°é«˜ç²¾å‡†åº¦çš„å›¾åƒè¯†åˆ«ï¼Œä»–çš„ç‰¹ç‚¹æ˜¯åªç”¨è¯†åˆ«ä¸€æ¬¡ï¼ŒYOLOä¾¿æ˜¯â€œYou only look onceâ€çš„ç¼©å†™ï¼Œä»¥ä¸‹æ˜¯å®˜æ–¹çš„ç®€ä»‹ï¼š

  ![image-20240401230711546](image-20240401230711546.png)

* **Pytorch**æ˜¯Facebookäººå·¥æ™ºèƒ½ç ”ç©¶å›¢é˜Ÿç ”å‘çš„ä¸€ä¸ª**æ·±åº¦å­¦ä¹ æ¡†æ¶**ï¼Œä»–æœ€å¼ºå¤§çš„åŠŸèƒ½æ˜¯å¯ä»¥è°ƒç”¨**GPUçš„ç®—åŠ›**ï¼ˆåŸºäºCUDAğŸ«¡ï¼‰æ¥è¿›è¡Œæ¨¡å‹è®­ç»ƒï¼Œä»¥ä¸‹æ˜¯å®˜æ–¹çš„ç®€ä»‹ï¼š

![image-20240402000539882](image-20240402000539882.png)

* **CUDA**æ˜¯è‹±ä¼Ÿè¾¾NVIDIAå¼€å‘çš„å¯ä»¥åˆ©ç”¨è‹±ä¼Ÿè¾¾æ˜¾å¡ä¸Šçš„å¼ºå¤§ç®—åŠ›æ¥è¿›è¡Œç¼–è¯‘ï¼Œè¿è¡Œç¨‹åºçš„å·¥å…·åŒ…ï¼Œä¸‹æ–‡ä¼šæåˆ°è¦æƒ³è®­ç»ƒ**YOLO**çš„é€Ÿåº¦å¿«äº›ï¼Œæœ€å¥½è¦æœ‰èƒ½å€ŸåŠ©**CUDA**çš„**Pytorch**ç‰ˆæœ¬ã€‚
* **Annaconda**æ˜¯ä¸€ä¸ªpythonçš„**åº“ç®¡ç†å™¨**ï¼ˆLibraryï¼‰å’Œ**ç¯å¢ƒç®¡ç†å™¨**ï¼ˆ Environmentï¼‰ï¼Œæœ¬æ¬¡å®éªŒä½¿ç”¨çš„ç¯å¢ƒå°±æ˜¯Annacondaå»ºç«‹çš„ï¼Œä¸‹æ–‡ä¼šæåˆ°ä½¿ç”¨åŸå› ã€‚



## å®éªŒè¿‡ç¨‹ğŸ“œ

1. é¦–å…ˆæ˜¯åœ¨å®˜ç½‘ä¸‹è½½[**YOLOv5çš„6.0**](https://github.com/ultralytics/yolov5/tree/v6.0)ç‰ˆæœ¬ï¼Œæ ¹æ®éœ€æ±‚é…ç½®ç¯å¢ƒã€‚

> æ ¹æ®å®˜æ–¹çš„requirment.txtï¼Œä¸‹è½½å¿…è¦çš„åº“ä¹‹å¤–ï¼Œè¿˜éœ€è¦é…ç½®**pytorch**å’ŒCUDAçš„ç¯å¢ƒï¼Œå…·ä½“çœ‹è¿™ä¸ª[**æ•™ç¨‹**](https://www.bilibili.com/video/BV1uN411E7gV/?spm_id_from=333.880.my_history.page.click&vd_source=99294a2a1c5504f559670de616463ae4)ï¼Œå…¨ç¨‹å‡ ä¹å‚»ç“œå¼é…ç½®æ–¹æ³•ï¼ŒåŸç†æ˜¯ä½¿ç”¨**Annaconda**æ¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„pythonç¯å¢ƒï¼Œéš”ç»ç³»ç»Ÿç¯å¢ƒå¸¦æ¥çš„å½±å“ï¼ˆä½ å¹²çš„å¥½å•ŠğŸ˜ï¼‰ï¼Œè¿™ä¸ªè§†é¢‘æ²¡æœ‰æ•™æ€ä¹ˆå®‰è£…**CUDA**ï¼ˆå…ˆçœ‹ä¸‹é¢æ³¨é‡Šï¼‰ï¼Œè¿™é‡Œè´´ä¸ª[**å®˜ç½‘**](https://developer.nvidia.com/cuda-toolkit)å§ã€‚
>
> > æ³¨ï¼šæ²¡æœ‰CUDAä¹Ÿå¯ä»¥è·‘è¿™ä¸ªæ¨¡å‹ï¼Œä½†æ˜¯CPUè·‘çš„å¤ªæ…¢äº†å—ä¸äº†ğŸ˜‘ã€‚
>
> > å€¼å¾—å¼ºè°ƒçš„ä¸€ç‚¹YOLOå¯¹pytorchçš„ç‰ˆæœ¬è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œä½†æ˜¯pytorchå¯¹CUDAçš„è¦æ±‚æå…¶é«˜ï¼Œå‚è€ƒå…¶[**å®˜ç½‘**](https://pytorch.org/get-started/locally/)ï¼Œæ–‡æ¡£å¾ˆè¯¦ç»†ï¼Œé‡Œé¢æè¿°ä¸€ä¸ªpytorchç‰ˆæœ¬å¿…é¡»å¯¹åº”ä¸€ä¸ªç‰¹åˆ«çš„CUDAç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ä¸å…·å¤‡å…¼å®¹æ€§ã€‚

2. ç„¶åæ˜¯äººå·¥å¯¹å…¶æ•°æ®é›†**datasets**è¿›è¡Œäººå·¥æ ‡è®°å“ªäº›ç‰©å“æ˜¯å“ªäº›ï¼ˆä¿—ç§°æ‰“æ ‡ğŸ¤ï¼Œè°·æ­Œå¾ˆå¤šæœºå™¨äººéªŒè¯å…¶å®ä¹Ÿæ˜¯ç”¨äºæ”¶é›†æ‰“æ ‡æ•°æ®ï¼‰ï¼Œå› ä¸ºæœºå™¨å­¦ä¹ å’Œäººä¸€æ ·éœ€è¦å­¦ä¹ èµ„æ–™å‚è€ƒï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸€ä½å¤§ç¥å¼€å‘çš„å¼€æºç½‘ç«™ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åˆ°æœ¬åœ°ç”¨ï¼Œå«[**Makesense**](https://www.makesense.ai/)ï¼Œæ“ä½œçš„è¯åœ¨ç¬¬å››æ­¥çš„é“¾æ¥é‡Œé¢å¼€å§‹æœ‰æåˆ°ã€‚
3. æ‰“å®Œæ ‡ä¹‹ååœ¨YOLOv5çš„æ–‡ä»¶å¤¹ä¸‹é¢æ–°å»ºè‡ªå·±çš„**æ•°æ®ç›®å½•**ï¼ˆdatasetsï¼‰ï¼Œå›¾ç‰‡åº“ä¸­åˆ›å»ºè®­ç»ƒé›†train2017ï¼Œæµ‹è¯•é›†val2017ï¼Œåå­—ä»€ä¹ˆçš„å¯ä»¥è‡ªå·±èµ·ï¼Œä¼šæ”¹é…ç½®æ–‡ä»¶å°±è¡ŒğŸ˜ï¼Œæ•°æ®é›†æŒ‰ä»€ä¹ˆæ¯”ä¾‹åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†æŒ‰è‡ªå·±å–œå¥½ï¼Œæˆ‘çš„æ¯”ä¾‹æ¥è¿‘7:1ï¼Œæ ‡ç­¾åº“ä¸­åŒç†ï¼Œç»“æ„å¦‚ä¸‹å›¾ï¼š

![](image-20240401201729529.png)

4. æ ¹æ®**å­¦é•¿çš„[æ•™ç¨‹](https://blog.csdn.net/m0_63292184/article/details/136963850?spm=1001.2014.3001.5501)**æ”¹ç›¸åº”çš„æ•°å€¼ï¼ˆç¬¬ä¸‰èŠ‚é…ç½®å‚æ•°å¼€å§‹çœ‹ï¼‰ï¼Œä¹Ÿå°±æ˜¯è°ƒæ•´æ¨¡å‹ä»¥é€‚é…ä½ çš„éœ€æ±‚ï¼Œæ ¸å¿ƒå‚æ•°åœ¨æ³¨é‡Šä¸­æï¼ŒæŒ‰ç…§è°ƒæ•´é¡ºåºã€‚æ ‡ç­¾å’Œæ ‡ç­¾æ•°é‡ä¸€å®šè¦å’Œä½ æ‰“æ ‡æ—¶è®¾ç½®çš„ä¸€æ ·ï¼Œè¿™ä¸ªåœ¨å‘ç‚¹2ä¼šæœ‰æ‰€ä»‹ç»ã€‚

   > * train.pyä¸­éœ€è¦ä¿®æ”¹çš„å‚æ•°
   >
   >   weights -- è®­ç»ƒæ—¶ä½¿ç”¨çš„æ¨¡å‹æƒé‡æ–‡ä»¶ï¼Œåç¼€.pt
   >
   >   cfg -- æ¨¡å‹å‚æ•°é…ç½®æ–‡ä»¶
   >
   >   data -- æ¨¡å‹æ•°æ®æ–‡ä»¶ï¼Œé‡Œé¢å­˜æœ‰æ ‡ç­¾æ•°ï¼Œæ ‡ç­¾ç±»å‹
   >
   >   hyp -- æ¨¡å‹è®­ç»ƒå‚æ•°
   >
   >   batch-size -- å ç”¨ç®—åŠ›
   >
   >   evole -- ä¼˜åŒ–æ¬¡æ•°
   >
   >   device -- è®¾å¤‡ï¼Œå…¶å®å°±æ˜¯ç”¨äºè°ƒç”¨NVIDIAæ˜¾å¡çš„å‚æ•°
   >
   >   workers -- åŒæ—¶åŠ è½½æ•°ï¼ˆæ¨æµ‹æ˜¯ï¼‰
   >
   >   patience -- è¿­ä»£åæ²¡æœ‰è¿›æ­¥åæœ€å¤šèµ°å¤šå°‘æ­¥
   >
   >   epochs -- å‚è€ƒä¸€äº›æ–‡æ¡£çš„æè¿°ï¼Œæ˜¯æ•°æ®é›†ä¼šè¢«ç”¨äºè¿ç®—å¤šå°‘æ¬¡çš„æ„æ€
   >
   > * dataæŒ‡å‘çš„æ–‡ä»¶ï¼Œè¿™é‡Œæ˜¯åˆå§‹çš„coco128.yaml
   >
   >   path -- æŒ‡å‘ä½ è®¾ç½®çš„æ•°æ®é›†ï¼Œåä¸¤ä¸ªä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†å¯¹åº”çš„æ–‡ä»¶å¤¹
   >
   >   nc -- æ€»æ ‡ç­¾æ•°
   >
   >   name -- æ ‡ç­¾åé›†åˆ
   >
   > * cfgæŒ‡å‘çš„æ–‡ä»¶ï¼Œå³æ¨¡å‹æœ¬ä½“
   >
   >   nc -- æ€»æ ‡ç­¾æ•°
   >
   > * hypæŒ‡å‘çš„æ–‡ä»¶ï¼Œå³è®­ç»ƒå‚æ•°æ–‡ä»¶
   >
   >   lf0 -- åˆå§‹å­¦ä¹ ç‡
   >
   >   lrf -- æœ€ç»ˆå­¦ä¹ ç‡
   >
   >   degree -- è¯†åˆ«å›¾ç‰‡æ—‹è½¬è¿‡çš„ç¨‹åº¦
   >
   >   shear -- è¯†åˆ«å›¾ç‰‡æœ‰æ²¡æœ‰è¢«å‰ªåˆ‡è¿‡çš„ç¨‹åº¦
   >
   >   perspective -- è¯†åˆ«å›¾ç‰‡æœ‰æ²¡è¢«é®æŒ¡çš„ç¨‹åº¦

5. æœ€åå°±æ˜¯è¿è¡Œç¨‹åºäº†ï¼Œç›¸ä¿¡ä½ çœ‹å®Œæ•™ç¨‹ä¹‹åç”¨çš„æ˜¯pycharmæ¥è¿è¡Œçš„ï¼Œç›´æ¥è§‚å¯Ÿè¿è¡Œç»“æœï¼Œæ‰“å¼€**runsæ–‡ä»¶å¤¹**ï¼Œä½ è®¾ç½®çš„è®­ç»ƒé›†çš„**æœ€åä¸€æ¬¡è®­ç»ƒç»“æœ**çš„æ–‡ä»¶å¤¹ã€‚

   > ä¾‹å¦‚æˆ‘è¿™é‡Œçš„è·¯å¾„æ˜¯ `.\runs\train2017\exp38`

   è¿™é‡Œé¢å°±æœ‰ä½ çš„è®­ç»ƒç»“æœäº†ï¼Œè¿™é‡Œå±•ç¤ºä¸€ä¸‹æˆ‘çš„results.jpgï¼ˆæœ‰ç‚¹å·®è™½ç„¶ï¼Œå› ä¸ºæ‹Ÿåˆæ›²çº¿ä¸ç®—ç‰¹åˆ«å¹³æ»‘ï¼Œå¯èƒ½æ˜¯æ•°æ®é›†çš„é—®é¢˜ğŸ¤¨ï¼‰ï¼š

   ![](results.png)

	æ•°æ®é›†çš„é—®é¢˜åœ¨ä¸Šé¢[å­¦é•¿çš„æ–‡æ¡£](https://blog.csdn.net/m0_63292184/article/details/136963850?spm=1001.2014.3001.5501)é‡Œé¢æœ‰æåˆ°è¿‡è®­ç»ƒå¾—ä¸å¥½çš„å¤„ç†æ–¹æ³•ï¼Œåœ¨æ­¤ä¸å¤šèµ˜è¿°ï¼Œä¸ªäººè®¤ä¸ºæˆ‘çš„è®­ç»ƒç»“æœæ²¡ä»€ä¹ˆå¤ªå¤§é—®é¢˜ï¼Œé‡Œé¢çš„å‚æ•°æˆ‘åªèƒ½çœ‹æ‡‚ä¸€äº›ï¼Œå‡†ç¡®ç‡**precision**ï¼Œå¬å›ç‡**recall**ï¼Œè®­ç»ƒä¸¢å¤±ç‡**loss**ï¼Œå…¶ä»–çš„ä¼šåœ¨åæœŸå­¦ä¹ ä¸Šé‡åˆ°ï¼Œåœ¨æ­¤ä¸å¤šè¡¥å……ã€‚



## å‘ç‚¹é›†åˆğŸ˜…

1. é‰´äºpythonçš„è¯»å–æœºåˆ¶ï¼Œå®¹æ˜“å‡ºç°çš„ä¸€ä¸ªé—®é¢˜æ˜¯è¯»å–çš„æ—¶å€™**ç¼–ç é”™è¯¯**ï¼Œå½¢å¼å¦‚ä¸‹ï¼š

   `UnicodeDecodeError: â€˜gbkâ€˜ codec canâ€˜t decode byte 0x80 in position 198: illegal multibyte sequence`

   å¯¹äºè¿™ä¸ªåŒ…ä¸»è¦é’ˆå¯¹çš„æ˜¯yamlç±»é…ç½®æ–‡ä»¶ï¼Œå®˜æ–¹å¤§èªæ˜åœ¨æ›´æ–°çš„æ—¶å€™æ”¾äº†ä¸ªç«ç®­çš„emojiï¼ˆğŸš€å°±è¿™ä¸ªï¼‰è¿›å»è¿˜æœ‰æ³¨é‡Šä¸­è¾…åŠ©å¯»æ‰¾åŸå§‹æ–‡ä»¶çš„å‹å¥½æ³¨é‡Šé‡Œé¢ï¼ŒåŠ äº†ä¸ªç®­å¤´ï¼ˆâ€œâ†â€å°±è¿™ä¸ªï¼‰ï¼Œåˆ æ‰æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚
   
   åŸç†æ˜¯pyhtonè¯†åˆ«ä¸äº†è¿™ç±»å­—ç¬¦ï¼Œä»–ä»¬ä¸åœ¨utf-8å’ŒGBKçš„ç¼–ç ä½“ç³»ä¸­ï¼Œç±»ä¼¼ä¸‹é¢è¿™ç§æƒ…å†µï¼š
   
   ![image-20240402171214308](E:\707\FW\png\image-20240402171214308.png)

> å‚è€ƒæ–‡æ¡£ï¼š[å°ç«ç®­â€œğŸš€â€åˆ é™¤](https://wanghao.blog.csdn.net/article/details/128225609?spm=1001.2101.3001.6650.10&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-10-128225609-blog-122971106.235%5Ev43%5Epc_blog_bottom_relevance_base7&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-10-128225609-blog-122971106.235%5Ev43%5Epc_blog_bottom_relevance_base7) [å·¦ç®­å¤´â€œâ†â€åˆ é™¤](https://blog.csdn.net/shuangshuangboole/article/details/131420080?spm=1001.2014.3001.5502)

2. è¿™ä¸ªå‘ç‚¹ä¼šé‡åˆ°å®Œå…¨æ˜¯å› ä¸ºå¼€å§‹å­¦çš„æ—¶å€™ç…§æ¬äº†å­¦é•¿çš„æ•™ç¨‹ã€‚`data.yaml`ä¸­**nc**çš„å€¼ä¸€å®šè¦æ˜¯ä½ **æµ‹è¯•é›†ä¸­çš„ç±»åˆ«æ•°**ï¼Œå¦åˆ™å‡ºç°æŠ¥é”™å¦‚ä¸‹ï¼Œæ„æ€æ˜¯å­˜åœ¨æ ‡ç­¾ç¼–å·å¤§äºæ ‡ç­¾æ•°çš„æƒ…å†µï¼š

   ![image-20240402172046895](E:\707\FW\png\image-20240402172046895.png)

> å‚è€ƒæ–‡æ¡£ï¼š[è¯¥ç½‘å€çš„2.1èŠ‚](https://www.cnblogs.com/zhaoyingjie/p/14620817.html)
